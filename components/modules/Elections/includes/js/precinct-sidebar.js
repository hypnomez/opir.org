// Generated by CoffeeScript 1.4.0
(function() {

  $(function() {
    var L, map_container, precinct_sidebar, search_results, show_timeout;
    if (cs.module !== 'Elections') {
      return;
    }
    map_container = $('#map');
    search_results = $('.cs-elections-precincts-search-results');
    precinct_sidebar = $('.cs-elections-precinct-sidebar');
    show_timeout = 0;
    L = cs.Language;
    search_results.on('mouseenter', '[data-id]', function() {
      var $this;
      clearTimeout(show_timeout);
      $this = $(this);
      return show_timeout = setTimeout((function() {
        var id, precinct, _ref;
        id = parseInt($this.data('id'));
        _ref = JSON.parse(localStorage.getItem('precincts'));
        for (precinct in _ref) {
          precinct = _ref[precinct];
          if (precinct.id === id) {
            break;
          }
        }
        return map.panTo([precinct.lat, precinct.lng]).then(function() {
          return map.zoomRange.get([precinct.lat, precinct.lng]).then(function(zoomRange) {
            return map.setZoom(zoomRange[1], {
              duration: 500
            });
          });
        });
      }), 200);
    }).on('mouseleave', '[data-id]', function() {
      return clearTimeout(show_timeout);
    }).on('click', '[data-id]', function() {
      var $this, id, precinct, _ref;
      $this = $(this);
      id = parseInt($this.data('id'));
      _ref = JSON.parse(localStorage.getItem('precincts'));
      for (precinct in _ref) {
        precinct = _ref[precinct];
        if (precinct.id === id) {
          break;
        }
      }
      precinct_sidebar.html("<i class=\"cs-elections-precinct-sidebar-close uk-icon-times\"></i>\n<h2>" + L.precint_number(precinct.number) + "</h2>\n<p>" + $this.children('p').html() + "</p>").animate({
        width: 320
      }, 'fast');
      return map_container.animate({
        left: 320
      }, 'fast');
    });
    return precinct_sidebar.on('click', '.cs-elections-precinct-sidebar-close', function() {
      precinct_sidebar.animate({
        width: 0
      }, 'fast');
      return map_container.animate({
        left: 0
      }, 'fast');
    });
  });

}).call(this);
