// Generated by CoffeeScript 1.4.0

/**
 * @package        Elections
 * @category       modules
 * @author         Nazar Mokrynskyi <nazar@mokrynskyi.com>
 * @copyright      Copyright (c) 2014, Nazar Mokrynskyi
 * @license        MIT License, see license.txt
*/


(function() {

  $(function() {
    var L;
    if (cs.module !== 'Elections') {
      return;
    }
    L = cs.Language;
    return $(document).on('click', '.cs-elections-violation-read-more-sidebar button', function() {
      var id, value;
      id = $(this).parent().data('id');
      value = $(this).is('.not-true') ? -1 : 1;
      return $.ajax({
        url: "api/Precincts/violations/" + id + "/feedback",
        type: 'post',
        data: {
          value: value
        },
        success: function(data) {
          if (data !== 'ok') {
            return alert(L.looks_like_feedback_already_given);
          } else {
            return alert(L.thank_you_for_feedback);
          }
        }
      });
    });
  });

}).call(this);
